(this.webpackJsonpemployeemanagement=this.webpackJsonpemployeemanagement||[]).push([[0],{31:function(e,t,n){e.exports=n(47)},47:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(2),o=n(4),c=n(3),s=n(0),i=n.n(s),l=n(27),u=n.n(l),p=n(5),m=n.n(p),h=n(9),f=n(15),d=n(6),b=i.a.createContext(null),g=function(e){return function(t){return i.a.createElement(b.Consumer,null,(function(n){return i.a.createElement(e,Object.assign({},t,{user:n}))}))}},v=b,w=function e(){var t=this;Object(a.a)(this,e),this.updateUser=function(e){t.user=e},this.user=!1},O=i.a.createContext(null),j=function(e){return function(t){return i.a.createElement(O.Consumer,null,(function(n){return i.a.createElement(e,Object.assign({},t,{stitch:n}))}))}},y=O,E=n(13),k=function e(){var t=this;Object(a.a)(this,e),this.logInAnonymously=Object(h.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.client.auth.loginWithCredential(new E.a).then((function(e){return console.log(e),e}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),this.addUserData=function(){var e=Object(h.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.client.callFunction("AddNewUserData",[n]).then((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.signUpEmailPassword=function(){var e=Object(h.a)(m.a.mark((function e(n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client.auth.getProviderClient(E.d.factory),console.log(a),e.next=4,a.registerWithEmail(n.email,n.password).then((function(e){return e&&(console.log("Sign Up Successful"),console.log(e)),e})).catch((function(e){return console.log("An error occurred!"),console.log(e),e}));case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.SignInEmailPassword=function(){var e=Object(h.a)(m.a.mark((function e(n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new E.e(n.email,n.password),e.next=3,t.client.auth.loginWithCredential(a).then((function(e){return console.log("Sign In Successful"),console.log(e),e})).catch((function(e){console.log(e)}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.confirmMail=function(){var e=Object(h.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=E.c.defaultAppClient.auth.getProviderClient(E.d.factory),e.next=3,a.confirmUser(t,n).then((function(){return!0})).catch((function(e){console.log(e)}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.stitchApp=E.c.initializeDefaultAppClient("employeemanagementstitch-xrbnw"),this.client=E.c.defaultAppClient,this.mongodb=this.stitchApp.getServiceClient(E.b.factory,"mongodb-atlas")},C=(n(40),n(41),j(g(function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",null,"this is home page "))}}]),n}(s.Component))),n(29)),x=n(17),S={username:"",email:"",passwordOne:"",passwordTwo:"",error:null},U=j(g(function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).onSubmit=function(){var e=Object(h.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r.state.email.trim()&&""!==r.state.passwordOne.trim()&&""!==r.state.passwordTwo.trim()){e.next=3;break}return console.log("incomplete form"),e.abrupt("return");case 3:if(r.state.passwordOne==r.state.passwordTwo){e.next=6;break}return console.log("paswords not same"),e.abrupt("return");case 6:return e.next=8,r.props.stitch.signUpEmailPassword({email:r.state.email,password:r.state.passwordOne}).then((function(e){return console.log(e),e}));case 8:n=e.sent,console.log(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onChange=function(e){r.setState(Object(x.a)({},e.target.name,e.target.value))},r.state=Object(C.a)({},S),r}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.email,a=t.passwordOne,r=t.passwordTwo,o=t.error,c=a!==r||""===a||""===n;return i.a.createElement("form",{onSubmit:function(t){e.onSubmit(),t.preventDefault()}},i.a.createElement("div",{class:"row justify-content-center bg-white p-5"},i.a.createElement("h1",null,"Sign Up")),i.a.createElement("div",{class:"row justify-content-center bg-white"},i.a.createElement("div",{className:"col-6"},i.a.createElement("input",{name:"email",class:"col-12 my-2",value:n,onChange:this.onChange,type:"text",placeholder:"Email Address"}),i.a.createElement("input",{name:"passwordOne",class:"col-12 my-2",value:a,onChange:this.onChange,type:"password",placeholder:"Password"}),i.a.createElement("input",{name:"passwordTwo",class:"col-12 my-2",value:r,onChange:this.onChange,type:"password",placeholder:"Confirm Password"}),i.a.createElement("button",{class:"btn btn-primary col-12 my-2",disabled:c,type:"submit"},"Sign Up"),o&&i.a.createElement("p",null,o.message))))}}]),n}(s.Component))),I=j(g(function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={email:"",password:""},e.inputChangeHandler=function(t,n){e.setState(Object(x.a)({},n,t.target.value))},e.SignInHandler=Object(h.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==(n={email:e.state.email,password:e.state.password}).email.trim()&&""!==n.password.trim()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.props.stitch.SignInEmailPassword(n).then((function(t){return console.log(t),console.log(e.props.stitch),t}));case 5:a=t.sent,e.props.stitch.client.callFunction("CheckUserData",["hello"]).then((function(e){console.log(e)})),console.log(a),e.props.user.updateUser(a);case 9:case"end":return t.stop()}}),t)}))),e}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return i.a.createElement("main",{className:"d-flex m-5 justify-content-center"},i.a.createElement("div",{className:"row col-sm-12 col-md-9 justify-content-center bg-light shadow p-5"},i.a.createElement("div",{className:"col-12 text-center display-4"},"Sign In"),i.a.createElement("input",{className:"col-12 m-1 form-control shadow",label:"E-Mail",config:{type:"email"},onChange:function(t){return e.inputChangeHandler(t,"email")}}),i.a.createElement("input",{className:"col-12 mt-1 form-control shadow",label:"Password",config:{type:"password"},onChange:function(t){return e.inputChangeHandler(t,"password")}}),i.a.createElement("button",{className:"btn btn-dark m-1 col-6 shadow",onClick:function(){return e.SignInHandler()}},"Sign In")))}}]),n}(s.Component))),A=j(function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={confirmed:!1},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(this.props.location.search),n=t.get("token"),a=t.get("tokenId");console.log(this.props),this.props.stitch.confirmMail(n,a).then((function(t){console.log(t),e.setState({confirmed:t})}))}},{key:"render",value:function(){return this.state.confirmed?i.a.createElement("div",null,"Thank You For Confirming Your Email"):i.a.createElement("div",null,"confirming ...")}}]),n}(s.Component)),P=j(function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={confirmed:!1},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=window.location.search,t=new URLSearchParams(e);t.get("token"),t.get("tokenId")}},{key:"render",value:function(){return this.state.confirmed?i.a.createElement("div",null,"Thank You For Confirming Your Email"):i.a.createElement("div",null,"confirming ...")}}]),n}(s.Component)),D=g(function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(f.b,{to:"/SignUp",className:"btn btn-dark my-2 my-sm-0"},"Sign Up"),i.a.createElement(f.b,{to:"/SignIn",className:"btn btn-dark my-2 my-sm-0"},"Sign In"))}}]),n}(s.Component)),N=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("button",{className:"btn btn-dark"},this.props.email))}}]),n}(s.Component),M=j(function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={user:null},e}return Object(r.a)(n,[{key:"render",value:function(){return console.log(this.props.stitch.client),this.props.stitch.client.auth.activeUserAuthInfo.userId?i.a.createElement(N,{email:this.props.stitch.client.auth.activeUserAuthInfo.userProfile.data.email}):i.a.createElement(D,null)}}]),n}(s.Component)),T=(s.Component,function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e={},t="navbar border-bottom border-secondary ";return"light"==this.props.theme?(e={background:"linear-gradient(315deg, #ffffff, #999999)",boxShadow:"-5px -5px 10px #666666"},t+="navbar-light"):(e={background:"linear-gradient(315deg, #484848, #1f1f1f)",boxShadow:"-5px -5px 10px #0e0e0e, 5px 5px 10px #363636;"},t+="navbar-dark"),i.a.createElement("div",null,i.a.createElement("nav",{class:t,style:e},i.a.createElement("div",{className:"flex flex-grow-1"},i.a.createElement(f.b,{class:"navbar-brand flex-grow-1"},"Employee Management")),i.a.createElement(M,null)))}}]),n}(s.Component)),F=j(function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null)}}]),n}(s.Component)),H=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"bg-dark"},"Comms")}}]),n}(s.Component),W=j(g(function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).updateUserData=Object(h.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e.props.stitch),!e.props.stitch.client.auth.currentUser){t.next=11;break}return console.log("refreshing user data on page refresh"),t.next=5,e.props.stitch.client.auth.refreshCustomData();case 5:t.sent,console.log(e.props.stitch.client.auth.currentUser),e.props.user.updateUser(e.props.stitch.client.auth.currentUser),console.log(e.props.user),t.next=12;break;case 11:console.log("user not logged in");case 12:case"end":return t.stop()}}),t)}))),e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.updateUserData()}},{key:"render",value:function(){var e=this;return i.a.createElement(f.a,{basename:"/"},i.a.createElement("div",null,i.a.createElement(T,null),i.a.createElement("button",{onClick:Object(h.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e.props.stitch.client.auth.currentUser);case 1:case"end":return t.stop()}}),t)})))},"console.log userdata in app.js"),i.a.createElement(d.c,null,i.a.createElement(d.a,{path:"/SignUp"},i.a.createElement(U,null)),i.a.createElement(d.a,{path:"/SignIn"},i.a.createElement(I,null)),i.a.createElement(d.a,{path:"/FirstLoginData"},i.a.createElement(F,null)),i.a.createElement(d.a,{path:"/Communications"},i.a.createElement(H,null)),i.a.createElement(d.a,{path:"/ConfirmMail",component:A}),i.a.createElement(d.a,{path:"/ResetPassword"},i.a.createElement(P,null)))))}}]),n}(s.Component)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return i.a.createElement(y.Provider,{value:new k},i.a.createElement(v.Provider,{value:new w},i.a.createElement(W,null)))}}]),n}(s.Component);u.a.render(i.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.dec38cd7.chunk.js.map